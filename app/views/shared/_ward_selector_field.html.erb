
<%
    items_per_row = 4
%>

<div class="field">
  <p class="label">
    <%= label_text %>

    <small class="content is-small">
      (<a class="is-small" onclick="document.querySelectorAll('[name=\'wards[]\']').forEach(element => element.checked = true)">All</a> /
      <a class="is-small" onclick="document.querySelectorAll('[name=\'wards[]\']').forEach(element => element.checked = false)">Clear</a>)
    </small>
  </p>

  <div class="control">
    <% wards.each_slice(items_per_row)  do |row| %>
      <div class="columns is-marginless">
        <% row.each do |ward| %>
          <%#
            XXX Below CommitteeRoom-specific behaviour happens wherever this
            partial is used, but only actually relevant when creating new
            CommitteeRooms - could cause issues if Wards will already have
            CommitteeRooms when this is used in other places in future, e.g. in
            particular if we later support changing Wards for a WorkSpace after
            initial creation.

            XXX Possibly more warning/better indication of Ward already being
            covered by CommitteeRoom would be useful - use `confirm`?
          %>
          <% committee_room = ward.committee_room_in_work_space(work_space)%>

          <div class="column is-paddingless">
            <label
              class="checkbox <%= 'has-text-grey' if committee_room %>"

              <% if committee_room %>
                title="This ward is already covered by a committee room; selecting it will remove it from the existing committee room."
              <% end %>
            >

              <%= check_box_tag "wards[]", ward.id, false %>
              <%= ward.name %>

              <% if committee_room %>
                <span class="is-size-7">
                  [covered by <span class="is-italic"><%= committee_room.organiser_name %></span>]
                </span>
              <% end %>
            </label>
          </div>
        <% end %>

        <%# Ensure still same number of columns on final row, so items line up %>
        <%# correctly. %>
        <% (items_per_row - row.length).times do %>
          <div class="column is-paddingless">
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
